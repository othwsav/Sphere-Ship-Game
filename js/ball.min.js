$(document).ready(function(){$(".anounce .start h1, .anounce .start h4, .anounce .start ol li, .anounce .start button").each(function(a){$(this).delay(3e3*a+1e3).animate({opacity:"1"},500)}),$(".anounce .start").click(function(){$(this).find("button").css("opacity","1")}),$(".anounce .start button").on("click",function(){function a(){p=0,j=h+120,k=h/2+150,m=Math.floor(1.2*h)+50>l?l:Math.floor(1.2*h)+50,n=100<=500-Math.ceil(1.8*h)?500-Math.ceil(1.8*h):100,o=Array(m).fill("").map((a,b)=>b+1).sort(()=>Math.round(2*(Math.random()*m)-m)),q=!0}function b(){for(let a=0;a<l;a++)a<m?$(".gamecanvas .waves").append("<div class='enemy visible'></div>"):$(".gamecanvas .waves").append("<div class='enemy'></div>")}function c(){$(".gamecanvas .waves .enemy").detach()}function d(a,b){let c=a.offset().left,d=a.offset().top,e=d+a.outerHeight(!0),f=c+a.outerWidth(!0),g=b.offset().left,h=b.offset().top,i=h+b.outerHeight(!0),j=g+b.outerWidth(!0);return!(e<h||d>i||f<g||c>j)}function f(){$(".gamecanvas .waves .enemy.visible").each(function(e){$(this).delay(n*o[e]+500).animate({top:$(".gamecanvas").outerHeight()+$(this).height()+$(".ball").height()/2+"px"},{duration:1e3*(($(".gamecanvas").outerHeight()+$(this).height()+$(".ball").height()/2)/k),easing:r[e>=r.length?e%r.length:e],progress:function(){d($(this),$(".ball"))&&(h--,$(".score span").text(h),console.log(h),$(this).stop(!0).fadeOut(500,function(){$(this).removeClass("visible")}),u.play(),i--,$(".lives span").text(2==i?"\u2764\uFE0F\u2764\uFE0F":1==i?"\u2764\uFE0F":""),0==i&&(x.pause(),t.play(),$(".gamecanvas .waves .enemy.visible").stop(!0).fadeOut(500,function(){$(this).removeClass("visible")}),$(".gameover").fadeIn(2e3,function(){$(this).css("display","flex").children().first().animate({fontSize:"16.8vw"},2e3,"easeOutBounce",function(){$(this).next().animate({fontSize:"5vw"},1e3,"easeOutExpo",function(){function a(){c++,b=c>h-12?200:75*(c/h),d.find("span").text(c),v.paused?v.play():v.currentTime=0;let e=setTimeout(a,b);c>h&&clearTimeout(e)}let b,c=0,d=$(this);a()})})})))},always:function(){p++,h++,$(".score span").text(h),p>=m&&0!=i&&(w.play(),a(),c(),b())}})})}$(".anounce .start").fadeOut(400,function(){$(".anounce").click(function(){$(this).fadeOut(),x.loop=!0,x.play()}),$(".anounce .countdown").css("display","flex").children().each(function(a){$(this).delay(1e3*a+500).fadeIn(500).fadeOut(500,function(){2==a&&($(".anounce").fadeOut(),x.loop=!0,x.play())})})});let g=[$(".ball").position().left,$(".ball").position().top],h=0,i=3,j=h+120,k=h/2+150,l=200,m=Math.floor(1.2*h)+50>200?200:Math.floor(1.2*h)+50,n=100<=500-Math.ceil(1.8*h)?500-Math.ceil(1.8*h):100,o=Array(m).fill("").map((a,b)=>b+1).sort(()=>Math.round(2*(Math.random()*m)-m)),p=0,q=!0;const r=["linear","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","easeInSine","easeOutSine","easeInOutSine","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"],t=new Audio("../music/Game Over.mp3"),u=new Audio("../music/You lost a life.wav"),v=new Audio("../music/You gained a point.mp3"),w=new Audio("../music/You passed a wave.mp3"),x=new Audio("../music/during the play.m4a");$(".musicswitch").click(function(){$(this).find("i").toggleClass("red").text("volume_up"==$(this).find("i").text()?"volume_off":"volume_up"),x.volume=0==x.volume?1:0}),b(),$("html").contextmenu(function(a){a.preventDefault();let b=($(window).width()-$(".gamecanvas").outerWidth())/2,c=($(window).height()-$(".gamecanvas").outerHeight())/2;if(a.pageX>=b&&a.pageX<=$(".gamecanvas").outerWidth()+b&&a.pageY>=c&&a.pageY<=$(".gamecanvas").outerHeight()+c){g=[$(".ball").position().left,$(".ball").position().top];let d,e,h=`calc(${a.pageX}px - ${b}px)`,i=`calc(${a.pageY}px - ${c}px)`;$("#steps").prepend("<div class=\"dot\" style=\"top:"+i+";left:"+h+";\"></div>"),d=[$("#steps .dot:nth-child(1)").position().left,g[0]],e=[$("#steps .dot:nth-child(1)").position().top,g[1]],distance=Math.sqrt(Math.pow(Math.max(...d)-Math.min(...d),2)+Math.pow(Math.max(...e)-Math.min(...e),2)),$(".ball").css({"transition-duration":distance/j+"s",left:h.substr(0,h.length-1)+" - "+$(".ball").width()/2+"px)",top:i.substr(0,i.length-1)+" - "+$(".ball").height()/2+"px)"},500),setTimeout(function(){$("#steps .dot:nth-child(3)").detach()},2e3),!0==q&&(q=!1,f())}})})});